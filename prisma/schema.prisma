// âœ… 1ï¸âƒ£ áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ—áƒ áƒ‘áƒáƒ–áƒ˜áƒ¡ áƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ˜

datasource db {
provider = "postgresql"
url      = env("DATABASE_URL")
}

// âœ… 2ï¸âƒ£ Prisma Client-áƒ˜áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ‘áƒšáƒáƒ™áƒ˜
generator client {
provider = "prisma-client-js"
}

// âœ… 3ï¸âƒ£ áƒ áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒªáƒ®áƒ áƒ˜áƒšáƒ˜
model Role {
id    Int    @id @default(autoincrement())
name  String @unique
users User[]
}

// âœ… 4ï¸âƒ£ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒªáƒ®áƒ áƒ˜áƒšáƒ˜
model User {
id        Int       @id @default(autoincrement())
email     String    @unique
password  String
roleId    Int
role      Role      @relation(fields: [roleId], references: [id])
createdAt DateTime  @default(now())
projects  Project[]
}

// âœ… 5ï¸âƒ£ áƒáƒ áƒáƒ”áƒ¥áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒªáƒ®áƒ áƒ˜áƒšáƒ˜
model Project {
id          Int        @id @default(autoincrement())
name        String     @unique
description String?
ownerId     Int
owner       User       @relation(fields: [ownerId], references: [id])
createdAt   DateTime   @default(now())
updatedAt   DateTime   @updatedAt
templates   Template[]
widgets     Widget[]
pages       Page[]
}

// âœ… 6ï¸âƒ£ áƒ¨áƒáƒ‘áƒšáƒáƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒªáƒ®áƒ áƒ˜áƒšáƒ˜
model Template {
id          Int      @id @default(autoincrement())
name        String   @unique
description String?
createdAt   DateTime @default(now())
updatedAt   DateTime @updatedAt
projectId   Int
project     Project  @relation(fields: [projectId], references: [id])
widgets     Widget[]
}

// âœ… 7ï¸âƒ£ áƒ•áƒ˜áƒ¯áƒ”áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒªáƒ®áƒ áƒ˜áƒšáƒ˜
model Widget {
id       Int    @id @default(autoincrement())
name     String
type     String // áƒ•áƒ˜áƒ¯áƒ”áƒ¢áƒ˜áƒ¡ áƒ¢áƒ˜áƒáƒ˜ (áƒ›áƒáƒ’.: 'button', 'input', 'image' áƒ“áƒ áƒ.áƒ¨.)
settings Json // JSON áƒ•áƒ”áƒšáƒ˜, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ˜áƒœáƒáƒ®áƒáƒ•áƒ¡ áƒ•áƒ˜áƒ¯áƒ”áƒ¢áƒ˜áƒ¡ áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ”áƒ‘áƒ¡

projectId Int?
project   Project? @relation(fields: [projectId], references: [id])

templateId Int?
template   Template? @relation(fields: [templateId], references: [id])

createdAt      DateTime         @default(now())
updatedAt      DateTime         @updatedAt
widgetInstances WidgetInstance[]
}

// âœ… 8ï¸âƒ£ áƒ’áƒ•áƒ”áƒ áƒ“áƒ”áƒ‘áƒ˜ (Pages)
model Page {
id         Int         @id @default(autoincrement())
name       String
projectId  Int
project    Project     @relation(fields: [projectId], references: [id])
components Component[]
createdAt  DateTime    @default(now())
updatedAt  DateTime    @updatedAt
}

// âœ… 9ï¸âƒ£ áƒ™áƒáƒ›áƒáƒáƒœáƒ”áƒœáƒ¢áƒ”áƒ‘áƒ˜ (Components)
model Component {
id              Int              @id @default(autoincrement())
name            String
type            String
pageId          Int
page            Page             @relation(fields: [pageId], references: [id])
widgetInstances WidgetInstance[]
createdAt       DateTime         @default(now())
updatedAt       DateTime         @updatedAt
}

// âœ… ğŸ”Ÿ áƒ•áƒ˜áƒ¯áƒ”áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ˜áƒœáƒ“áƒ˜áƒ•áƒ˜áƒ“áƒ£áƒáƒšáƒ£áƒ áƒ˜ áƒ™áƒáƒœáƒ¤áƒ˜áƒ’áƒ£áƒ áƒáƒªáƒ˜áƒ (WidgetInstance)
model WidgetInstance {
id          Int       @id @default(autoincrement())
widgetId    Int
componentId Int
component   Component @relation(fields: [componentId], references: [id])
widget      Widget    @relation(fields: [widgetId], references: [id])
settings    Json
createdAt   DateTime  @default(now())
}
